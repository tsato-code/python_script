"""
quadkeyのテスト
pip install mercantile
"""
import mercantile


lat =  35.681166
lon = 139.766992
zoom = 15
# 位置情報からタイルの取得
print(mercantile.tile(lon, lat, zoom))
# タイルから矩形左上の位置情報取得
print(mercantile.ul(mercantile.tile(lon, lat, zoom)))
# タイルから矩形4隅の位置情報取得
print(mercantile.bounds(mercantile.tile(lon, lat, zoom)))
# タイルから1次元キー取得
print(mercantile.quadkey(mercantile.tile(lon, lat, zoom)))
# キーから位置情報取得
print(mercantile.quadkey_to_tile(mercantile.quadkey(mercantile.tile(lon, lat, zoom))))
# 位置情報からsphere xyを取得
print(mercantile.xy(lon, lat, zoom))
# zoom深さを変えながら矩形4隅の位置情報を取得
for i in range(1,21):
	bounds = mercantile.bounds(mercantile.tile(lon, lat, zoom=i))
	print("{:16.12f} {:16.12f} {:16.12f} {:16.12f}".format(*bounds))


"""
> python test_mercantile.py
Tile(x=29105, y=12903, z=15)
LngLat(lng=139.757080078125, lat=35.68407153314097)
LngLatBbox(west=139.757080078125, south=35.67514743608467, east=139.76806640625, north=35.68407153314097)
133002112310223
Tile(x=29105, y=12903, z=15)
(15558790.37914754, 4256838.526960282)
  0.000000000000   0.000000000000 180.000000000000  85.051128779807
 90.000000000000   0.000000000000 180.000000000000  66.513260443112
135.000000000000   0.000000000000 180.000000000000  40.979898069620
135.000000000000  21.943045533438 157.500000000000  40.979898069620
135.000000000000  31.952162238025 146.250000000000  40.979898069620
135.000000000000  31.952162238025 140.625000000000  36.597889133070
137.812500000000  34.307143856288 140.625000000000  36.597889133070
139.218750000000  35.460669951495 140.625000000000  36.597889133070
139.218750000000  35.460669951495 139.921875000000  36.031331776332
139.570312500000  35.460669951495 139.921875000000  35.746512259919
139.746093750000  35.603718740697 139.921875000000  35.746512259919
139.746093750000  35.675147436085 139.833984375000  35.746512259919
139.746093750000  35.675147436085 139.790039062500  35.710837835300
139.746093750000  35.675147436085 139.768066406250  35.692994632099
139.757080078125  35.675147436085 139.768066406250  35.684071533141
139.762573242188  35.679609609369 139.768066406250  35.684071533141
139.765319824219  35.679609609369 139.768066406250  35.681840602445
139.766693115234  35.680725113704 139.768066406250  35.681840602445
139.766693115234  35.680725113704 139.767379760742  35.681282860024
139.766693115234  35.681003987351 139.767036437988  35.681282860024
"""